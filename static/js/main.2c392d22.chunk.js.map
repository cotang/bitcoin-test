{"version":3,"sources":["components/currency-input/index.js","components/currency-input/currency-input.js","components/helpers/click-outside.js","components/helpers/api-service.js","components/currency-list/index.js","components/currency-list/currency-list.js","components/currency-output/index.js","components/currency-output/currency-output.js","components/app/index.js","components/app/app.js","index.js"],"names":["CurrencyInput","_ref","searchText","onInputFocus","onInputClear","onSearchFilter","react_default","a","createElement","className","type","value","onFocus","onChange","event","target","placeholder","onClick","ClickOutside","setWrapperRef","node","_this","wrapperRef","handleClickOutside","contains","props","onInputBlur","document","addEventListener","this","removeEventListener","ref","children","Component","BitcoinService","_apiBase","_proxyBase","url","proxy","base","fetch","concat","res","ok","Error","status","json","getResource","currency","CurrencyList","bitcoinService","state","currencyList","loadCurrencyList","_this2","getCurrencyList","then","setState","items","filter","item","toLowerCase","indexOf","country","_this3","elements","search","map","onSelectCurrency","key","CurrencyOutput","currencyData","historyCurrencyData","loadCurrencyData","loadHistoryCurrencyData","prevProps","selectedCurrency","getCurrencyData","getCurrencyHistoryData","_this$props$selectedC","_this$state","data","Object","keys","bpi","includes","rate_float","description","time","updated","historyTable","App","searching","showDropdown","hideDropdown","input","components_currency_input","debounce","list","components_currency_list","results","components_currency_output","click_outside_ClickOutside","ReactDOM","render","components_app","getElementById"],"mappings":"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","file":"static/js/main.2c392d22.chunk.js","sourcesContent":["import CurrencyInput from './currency-input';\n\nexport default CurrencyInput;","import React from 'react';\nimport './currency-input.css';\n\nconst CurrencyInput = ({ searchText, onInputFocus, onInputClear, onSearchFilter }) => {\n  return (\n    <div className=\"currency-input\">\n      <input\n        type=\"text\"\n        className=\"form-control search-input\"\n        value={searchText}\n        onFocus={onInputFocus}\n        onChange={(event) => onSearchFilter(event.target.value)}\n        placeholder=\"type to search\" />\n      <button onClick={onInputClear} type=\"button\">Clear</button>\n    </div>\n  );\n};\nexport default CurrencyInput;\n\n","import React, { Component } from 'react';\n\n/* Component that calls action (hides dropdown) if you click outside of it */\n\nexport default class ClickOutside extends Component {\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  }\n\n  setWrapperRef = (node) => {\n    this.wrapperRef = node;\n  }\n\n  handleClickOutside = (event) => {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      /* calling action */\n      this.props.onInputBlur();\n    }\n  }\n\n  render() {\n    return <div className=\"click-outside\" ref={this.setWrapperRef}>{this.props.children}</div>;\n  }\n}\n","/* separate service for api requests */\n\nexport default class BitcoinService {\n  _apiBase = 'https://api.coindesk.com/v1/bpi/';\n  _proxyBase = 'https://cors-anywhere.herokuapp.com/';\n\n  async getResource(url, proxy) {\n    const base = proxy ? this._proxyBase + this._apiBase : this._apiBase;\n    const res = await fetch(`${base}${url}`);\n\n    if (!res.ok) {\n      throw new Error(`Could not fetch ${url}` +\n        `, received ${res.status}`);\n    }\n    return await res.json();\n  }\n\n  /* Here I had to use proxy server, \n  because this route is unreachable without 'Access-Control-Allow-Origin' header */\n  async getCurrencyList() {\n    return await this.getResource('supported-currencies.json', true);\n  }\n  async getCurrencyData(currency) {\n    return await this.getResource(`currentprice/${currency}.json`);\n  }\n  async getCurrencyHistoryData(currency) {\n    return await this.getResource(`historical/close.json?currency=${currency}`);\n  }\n}","import CurrencyList from './currency-list';\n\nexport default CurrencyList;","import React, { Component } from 'react';\nimport './currency-list.css';\nimport { BitcoinService } from '../helpers';\n\nexport default class CurrencyList extends Component {\n  bitcoinService = new BitcoinService();\n  state = {\n    currencyList: [],\n  };\n\n  componentDidMount() {\n    this.loadCurrencyList();\n  }\n\n  loadCurrencyList() {\n    this.bitcoinService\n      .getCurrencyList()\n      .then(currencyList => {\n        this.setState({ currencyList });\n      });\n  }\n\n  /* filtering loaded currency list on the run */\n  search(items, searchText) {\n    if (searchText) {\n      return items.filter(item => {\n        return item.currency.toLowerCase().indexOf(searchText.toLowerCase()) !== -1 ||\n          item.country.toLowerCase().indexOf(searchText.toLowerCase()) !== -1;\n      });\n    } else {\n      return items;\n    }\n  }\n\n  render() {\n    const { currencyList } = this.state;\n    const visibleItems = this.search(currencyList, this.props.filter);\n\n    const elements = visibleItems.map((item) => {\n      return (\n        <li\n          onClick={() => this.props.onSelectCurrency(item)}\n          key={item.currency}\n          className=\"list-group-item\">\n          {item.currency} ({item.country})\n        </li>\n      );\n    });\n\n    return (\n      <div className=\"currency-list\">\n        <ul>\n          {elements}\n        </ul>\n      </div>\n    );\n  }\n};\n","import CurrencyOutput from './currency-output';\n\nexport default CurrencyOutput;","import React, { Component } from 'react';\nimport './currency-output.css';\nimport { BitcoinService } from '../helpers';\n\nexport default class CurrencyOutput extends Component {\n  bitcoinService = new BitcoinService();\n  state = {\n    currencyData: null,\n    historyCurrencyData: null,\n  };\n\n  componentDidMount() {\n    this.loadCurrencyData();\n    this.loadHistoryCurrencyData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.selectedCurrency !== prevProps.selectedCurrency) {\n      this.loadCurrencyData();\n      this.loadHistoryCurrencyData();\n    }\n  }\n\n  loadCurrencyData() {\n    const { currency } = this.props.selectedCurrency;\n    this.bitcoinService\n      .getCurrencyData(currency)\n      .then(currencyData => {\n        this.setState({ currencyData });\n      });\n  }\n\n  loadHistoryCurrencyData() {\n    const { currency } = this.props.selectedCurrency;\n    this.bitcoinService\n      .getCurrencyHistoryData(currency)\n      .then(historyCurrencyData => {\n        this.setState({ historyCurrencyData });\n      });\n  }\n\n  render() {\n    const { currency, country } = this.props.selectedCurrency;\n    const { currencyData, historyCurrencyData } = this.state;\n\n    /* Block with current data */\n    /* Condition that data is loaded \n    and renders only when props.selectedCurrency and state.currencyData corresponds */\n    const isCurrencyReadyForRender = currencyData &&\n      Object.keys(currencyData.bpi).includes(currency);\n\n    const data = isCurrencyReadyForRender ?\n      `1 bitcoin = ${currencyData.bpi[currency].rate_float} \n      ${currencyData.bpi[currency].description}\n       (${currencyData.time.updated})` :\n      null;\n\n    /* Block with historical data */\n    const historyTable = historyCurrencyData ?\n      <table className=\"currency-table\">\n        <caption>Historical BPI data</caption>\n        <tbody>\n          {Object.keys(historyCurrencyData.bpi).map(key =>\n            <tr key={key}>\n              <td>{key}</td>\n              <td>{historyCurrencyData.bpi[key]}</td>\n            </tr>\n          )}\n        </tbody>\n      </table> :\n      null;\n\n    return (\n      <div className=\"currency-output\">\n        <p>Selected currency: {currency} ({country})</p>\n        <hr />\n        {data}\n        <hr />\n        {historyTable}\n      </div>\n    );\n  }\n};\n","import App from './app';\n\nexport default App;","import React, { Component } from 'react';\nimport './app.css';\nimport CurrencyInput from '../currency-input';\nimport CurrencyList from '../currency-list';\nimport CurrencyOutput from '../currency-output';\nimport { ClickOutside } from '../helpers';\nimport { debounce } from 'lodash';\n\nexport default class App extends Component {\n  state = {\n    searchText: '',\n    searching: false,\n    selectedCurrency: null\n  };\n\n  onInputClear = () => {\n    this.setState({\n      searchText: '',\n      searching: false,\n      selectedCurrency: null\n    });\n  };\n  onSearchFilter = (searchText) => {\n    this.setState({\n      searchText: searchText\n    });\n  };\n  onSelectCurrency = (item) => {\n    this.setState({\n      searchText: item.currency,\n      searching: false,\n      selectedCurrency: item,\n    });\n  }\n  showDropdown = () => {\n    this.setState({\n      searching: true\n    });\n  }\n  hideDropdown = () => {\n    this.setState({\n      searching: false\n    });\n  }\n\n\n  render() {\n    const { searchText, searching, selectedCurrency } = this.state;\n\n    /* Block with input */\n    const input = <CurrencyInput\n      /* debounce here */\n      onSearchFilter={debounce(this.onSearchFilter, 250)}\n      onInputFocus={this.showDropdown}\n      onInputClear={this.onInputClear}\n      searchText={searchText}\n    />;\n\n    /* block with dropdown list */\n    const list = searching ?\n      <CurrencyList filter={searchText} onSelectCurrency={this.onSelectCurrency} /> :\n      null;\n\n    /* block with results */\n    const results = selectedCurrency ?\n      <div className=\"currency-results\">\n        <CurrencyOutput selectedCurrency={selectedCurrency} />\n      </div> :\n      null;\n\n    return (\n      <div className=\"currency\">\n        <div className=\"currency-container\">\n          <h1>Bitcoin rate</h1>\n          <ClickOutside onInputBlur={this.hideDropdown}>\n            <div className=\"currency-intake\">\n              {input}\n              {list}\n            </div>\n          </ClickOutside>\n          {results}\n        </div>\n      </div>\n    );\n  }\n};\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}