(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(10),u=n.n(a),o=(n(17),n(1)),i=n(2),s=n(5),l=n(4),p=n(6),h=(n(18),n(19),function(e){var t=e.searchText,n=e.onInputFocus,r=e.onInputClear,a=e.onSearchFilter;return c.a.createElement("div",{className:"currency-input"},c.a.createElement("input",{type:"text",className:"form-control search-input",value:t,onFocus:n,onChange:function(e){return a(e.target.value)},placeholder:"type to search"}),c.a.createElement("button",{onClick:r,type:"button"},"Clear"))}),y=(n(20),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).setWrapperRef=function(e){n.wrapperRef=e},n.handleClickOutside=function(e){n.wrapperRef&&!n.wrapperRef.contains(e.target)&&n.props.onInputBlur()},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){return c.a.createElement("div",{className:"click-outside",ref:this.setWrapperRef},this.props.children)}}]),t}(r.Component)),f=n(3),d=n.n(f),m=n(7),v=function(){function e(){Object(o.a)(this,e),this._apiBase="https://api.coindesk.com/v1/bpi/",this._proxyBase="https://cors-anywhere.herokuapp.com/"}return Object(i.a)(e,[{key:"getResource",value:function(){var e=Object(m.a)(d.a.mark(function e(t,n){var r,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?this._proxyBase+this._apiBase:this._apiBase,e.next=3,fetch("".concat(r).concat(t));case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(c.status));case 6:return e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCurrencyList",value:function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("supported-currencies.json",!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCurrencyData",value:function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("currentprice/".concat(t,".json"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrencyHistoryData",value:function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("historical/close.json?currency=".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),b=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).bitcoinService=new v,n.state={currencyList:[]},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadCurrencyList()}},{key:"loadCurrencyList",value:function(){var e=this;this.bitcoinService.getCurrencyList().then(function(t){e.setState({currencyList:t})})}},{key:"search",value:function(e,t){return t?e.filter(function(e){return-1!==e.currency.toLowerCase().indexOf(t.toLowerCase())||-1!==e.country.toLowerCase().indexOf(t.toLowerCase())}):e}},{key:"render",value:function(){var e=this,t=this.state.currencyList,n=this.search(t,this.props.filter).map(function(t){return c.a.createElement("li",{onClick:function(){return e.props.onSelectCurrency(t)},key:t.currency,className:"list-group-item"},t.currency," (",t.country,")")});return c.a.createElement("div",{className:"currency-list"},c.a.createElement("ul",null,n))}}]),t}(r.Component),C=(n(22),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).bitcoinService=new v,n.state={currencyData:null,historyCurrencyData:null},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadCurrencyData(),this.loadHistoryCurrencyData()}},{key:"componentDidUpdate",value:function(e){this.props.selectedCurrency!==e.selectedCurrency&&(this.loadCurrencyData(),this.loadHistoryCurrencyData())}},{key:"loadCurrencyData",value:function(){var e=this,t=this.props.selectedCurrency.currency;this.bitcoinService.getCurrencyData(t).then(function(t){e.setState({currencyData:t})})}},{key:"loadHistoryCurrencyData",value:function(){var e=this,t=this.props.selectedCurrency.currency;this.bitcoinService.getCurrencyHistoryData(t).then(function(t){e.setState({historyCurrencyData:t})})}},{key:"render",value:function(){var e=this.props.selectedCurrency,t=e.currency,n=e.country,r=this.state,a=r.currencyData,u=r.historyCurrencyData,o=a&&Object.keys(a.bpi).includes(t)?"1 bitcoin = ".concat(a.bpi[t].rate_float," \n      ").concat(a.bpi[t].description,"\n       (").concat(a.time.updated,")"):null,i=u?c.a.createElement("table",{className:"currency-table"},c.a.createElement("caption",null,"Historical BPI data"),c.a.createElement("tbody",null,Object.keys(u.bpi).map(function(e){return c.a.createElement("tr",{key:e},c.a.createElement("td",null,e),c.a.createElement("td",null,u.bpi[e]))}))):null;return c.a.createElement("div",{className:"currency-output"},c.a.createElement("p",null,"Selected currency: ",t," (",n,")"),c.a.createElement("hr",null),o,c.a.createElement("hr",null),i)}}]),t}(r.Component)),k=n(11),w=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={searchText:"",searching:!1,selectedCurrency:null},n.onInputClear=function(){n.setState({searchText:"",searching:!1,selectedCurrency:null})},n.onSearchFilter=function(e){n.setState({searchText:e})},n.onSelectCurrency=function(e){n.setState({searchText:e.currency,searching:!1,selectedCurrency:e})},n.showDropdown=function(){n.setState({searching:!0})},n.hideDropdown=function(){n.setState({searching:!1})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.searchText,n=e.searching,r=e.selectedCurrency,a=c.a.createElement(h,{onSearchFilter:Object(k.debounce)(this.onSearchFilter,250),onInputFocus:this.showDropdown,onInputClear:this.onInputClear,searchText:t}),u=n?c.a.createElement(b,{filter:t,onSelectCurrency:this.onSelectCurrency}):null,o=r?c.a.createElement("div",{className:"currency-results"},c.a.createElement(C,{selectedCurrency:r})):null;return c.a.createElement("div",{className:"currency"},c.a.createElement("div",{className:"currency-container"},c.a.createElement("h1",null,"Bitcoin rate"),c.a.createElement(y,{onInputBlur:this.hideDropdown},c.a.createElement("div",{className:"currency-intake"},a,u)),o))}}]),t}(r.Component);u.a.render(c.a.createElement(w,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.2c392d22.chunk.js.map